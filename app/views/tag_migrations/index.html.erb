<%= display_header title: 'Tag Migrations', breadcrumbs: ['Tag Migration'] do %>
  <%= link_to 'New tag migration', new_tag_search_path, class: 'btn btn-default' %>
<% end %>

<table class="table queries-list table-bordered table-striped" data-module="filterable-table">
  <thead>
    <tr>
      <th>State</th>
      <th>Search term</th>
      <th>Original source</th>
      <th>Date added</th>
      <th></th>
      <th></th>
    </tr>
    <%= render partial: 'shared/table_filter' %>
  </thead>
  <tbody>
    <% tag_migrations.each do |tag_migration| %>
      <tr>
        <td><%= state_label_for(label_type: tag_migration.label_type,
                                title: tag_migration.state_title) %></td>
        <td><%= tag_migration.query %></td>
        <td>
          <%= link_to tag_migration.source_base_path,
            website_url('/api/content' + tag_migration.source_base_path) %>
        </td>
        <td>
          <%= time_tag_for(tag_migration.created_at) %>
        </td>
        <td>
          <%= link_to "Preview", tag_migration_path(tag_migration) %>
        </td>
        <td>
          <%= link_to "Delete", tag_migration_path(tag_migration),
            method: :delete, class: "btn btn-danger btn-sm" %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
